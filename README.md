# wukong

æœ¬æ–‡ç”¨äºè®°å½•ä½¿ç”¨ç¨‹åºå®ç°å…¨å›½1:100ä¸‡åŸºç¡€åœ°ç†ä¿¡æ¯æ•°æ®åˆå¹¶çš„å…¨è¿‡ç¨‹ã€‚

> Geospatial data transform program (åœ°ç†æ•°æ®è½¬æ¢ç¨‹åº)ï¼Œå‘½åä¸ºæ‚Ÿç©ºï¼ˆwukongï¼‰ï¼Œå–æ„ï¼šä¸ƒåäºŒå˜

ç›®å‰ä»…ä»…å®ç°äº†å¢ƒç•Œä¸æ”¿åŒºæ•°æ®åˆå¹¶.

## æ•°æ®è¯´æ˜

å…¨å›½1ï¼š100ä¸‡å…¬ä¼—ç‰ˆåŸºç¡€åœ°ç†ä¿¡æ¯æ•°æ®ï¼ˆ2021ï¼‰è¦†ç›–å…¨å›½é™†åœ°èŒƒå›´å’ŒåŒ…æ‹¬å°æ¹¾å²›ã€æµ·å—å²›ã€é’“é±¼å²›ã€å—æµ·è¯¸å²›åœ¨å†…çš„ä¸»è¦å²›å±¿åŠå…¶ä¸´è¿‘æµ·åŸŸï¼Œå…±77å¹…1:100ä¸‡å›¾å¹…ï¼Œè¯¥æ•°æ®é›†æ•´ä½“ç°åŠ¿æ€§ä¸º2019å¹´ã€‚æ•°æ®é‡‡ç”¨2000å›½å®¶å¤§åœ°åæ ‡ç³»ï¼Œ1985å›½å®¶é«˜ç¨‹åŸºå‡†ï¼Œç»çº¬åº¦åæ ‡ã€‚

ä¸ºæ»¡è¶³å¹¿å¤§ç¤¾ä¼šç¾¤ä¼—å¯¹åœ°ç†ä¿¡æ¯æ•°æ®èµ„æºçš„éœ€æ±‚ï¼Œç»è‡ªç„¶èµ„æºéƒ¨æˆæƒï¼Œå…¨å›½åœ°ç†ä¿¡æ¯èµ„æºç›®å½•æœåŠ¡ç³»ç»Ÿæä¾›å…¨å›½1:100ä¸‡å…¨å›¾å±‚è¦ç´ å…è´¹ä¸‹è½½çš„æœåŠ¡ã€‚ä¸‹è½½æ•°æ®é‡‡ç”¨1ï¼š100ä¸‡æ ‡å‡†å›¾å¹…åˆ†å‘ï¼Œå†…å®¹åŒ…æ‹¬æ°´ç³»ã€å±…æ°‘åœ°åŠè®¾æ–½ã€äº¤é€šã€ç®¡çº¿ã€å¢ƒç•Œä¸æ”¿åŒºã€åœ°è²Œä¸åœŸè´¨ã€æ¤è¢«ã€åœ°ååŠæ³¨è®°9ä¸ªæ•°æ®é›†ï¼Œä¸”ä¿å­˜è¦ç´ é—´ç©ºé—´å…³ç³»å’Œç›¸å…³å±æ€§ä¿¡æ¯ã€‚


> ğŸ’¡ **<font color="FF0000">æä¾›ä¸‹è½½çš„æ˜¯çŸ¢é‡æ•°æ®ï¼Œä¸æ˜¯æœ€ç»ˆåœ°å›¾ï¼Œä¸ç¬¦å·åŒ–åçš„åœ°å›¾å†å¯è§†åŒ–è¡¨è¾¾ä¸Šå­˜åœ¨ä¸€å®šå·®å¼‚ã€‚ç”¨æˆ·åˆ©ç”¨æ­¤æ•°æ®ç¼–åˆ¶åœ°å›¾ï¼Œåº”å½“ä¸¥æ ¼æ‰§è¡Œã€Šåœ°å›¾ç®¡ç†æ¡ä¾‹ã€‹æœ‰å…³è§„å®šï¼›ç¼–åˆ¶çš„åœ°å›¾å¦‚éœ€å‘ç¤¾ä¼šå…¬å¼€çš„ï¼Œè¿˜åº”å½“ä¾æ³•å±¥è¡Œåœ°å›¾å®¡æ ¸ç¨‹åºã€‚**</font>

### æˆæœè§„æ ¼

- åˆ†å¹…ç¼–å·åŠèŒƒå›´

  1ï¼š100ä¸‡å…¬ä¼—ç‰ˆåŸºç¡€åœ°ç†ä¿¡æ¯æ•°æ®ï¼ˆ2021ï¼‰çš„å›¾å¹…æ€»æ•°ä¸º77å¹…ï¼Œåˆ†å¹…æ•°æ®æŒ‰ç…§GB/T 13989-2012ã€Šå›½å®¶åŸºæœ¬æ¯”ä¾‹å°ºåœ°å½¢å›¾åˆ†å¹…å’Œç¼–å·ã€‹æ‰§è¡Œã€‚ç©ºé—´å­˜å‚¨å•å…ƒä¸º6Â°ï¼ˆç»å·®ï¼‰Ã—4Â°ï¼ˆçº¬å·®ï¼‰ã€‚

- åæ ‡ç³»ç»Ÿ
    - å¹³é¢åæ ‡ç³»ï¼š 2000å›½å®¶å¤§åœ°åæ ‡ç³»ã€‚
    - é«˜ç¨‹åŸºå‡†ï¼š1985å›½å®¶é«˜ç¨‹åŸºå‡†ã€‚
    - åœ°å›¾æŠ•å½±ï¼šåˆ†å¹…æ•°æ®é‡‡ç”¨åœ°ç†åæ ‡ï¼Œåæ ‡å•ä½ä¸ºåº¦ã€‚
- å‡ ä½•ç²¾åº¦

  æ›´æ–°ååœ°ç‰©ç‚¹å¯¹äºé™„è¿‘é‡å¤–æ§åˆ¶ç‚¹çš„å¹³é¢ä½ç½®å’Œé«˜ç¨‹ä¸­è¯¯å·®ç¬¦åˆä¸‹è¡¨çš„è¦æ±‚ï¼Œä»¥ä¸¤å€ä¸­è¯¯å·®å€¼ä¸ºæœ€å¤§è¯¯å·®ã€‚

  | åœ°ç‰©ç‚¹è¯¯å·® | æœ€å° | æœ€å¤§ |
      | --- | --- | --- |
  | å¹³é¢ä½ç½® | 100 | 500 |
  | é«˜ç¨‹ | 50 | 200 |

- ç°åŠ¿æ€§

  1:100ä¸‡åœ°å½¢æ•°æ®ç°åŠ¿æ€§ä¸æ›´æ–°ä½¿ç”¨çš„æ•°æ®æºçš„ç°åŠ¿æ€§ä¸€è‡´ï¼Œæ•°æ®æ•´ä½“ç°åŠ¿æ€§è¾¾åˆ°2019å¹´ã€‚

### **æˆæœæ•°æ®ç»„ç»‡**

å…¨å›½1ï¼š100ä¸‡å…¬ä¼—ç‰ˆåœ°å½¢æ•°æ®ï¼ˆ2021ï¼‰å†…å®¹åŒ…æ‹¬æ°´ç³»ã€å±…æ°‘åœ°åŠè®¾æ–½ã€äº¤é€šã€ç®¡çº¿ã€å¢ƒç•Œä¸æ”¿åŒºã€åœ°è²Œä¸åœŸè´¨ã€æ¤è¢«ã€åœ°ååŠæ³¨è®°9ä¸ªæ•°æ®é›†ã€‚

æ•°æ®åˆ†å±‚çš„å‘½åé‡‡ç”¨å››ä¸ªå­—ç¬¦ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨æ•°æ®åˆ†ç±»ï¼Œç¬¬äºŒä¸‰ä¸ªå­—ç¬¦æ˜¯æ•°æ®å†…å®¹çš„ç¼©å†™ï¼Œç¬¬å››ä¸ªå­—ç¬¦ä»£è¡¨å‡ ä½•ç±»å‹ã€‚

![æ•°æ®åˆ†å±‚](https://img.zhoujian.site/images/202310092210356.png)

## ç›®æ ‡

- [ ]  å®ç°åˆ†å›¾å±‚åˆå¹¶ï¼ˆå¤„ç†å›¾å¹…åˆå¹¶æ—¶æ¥è¾¹é—®é¢˜ï¼‰
    - [ ]  æ°´ç³»ï¼ˆæš‚ç¼“ï¼‰
    - [ ]  äº¤é€šï¼ˆæš‚ç¼“ï¼‰
    - [x]  å¢ƒç•Œä¸æ”¿åŒºï¼ˆå›½ã€çœã€å¸‚ã€å¿ï¼‰
    - [ ]  åœ°ååŠæ³¨è®°
- [x]  æ ¹æ®åˆå¹¶åçš„è¡Œæ”¿åŒºåˆ’ä¸åœ°åæ³¨è®°ï¼Œåˆ¶ä½œè¡Œæ”¿åŒºåˆ’æ•°æ®åº“
- [x]  æ•°æ®åº“ä½¿ç”¨PostgreSQLï¼ˆPostGISï¼‰

## è®¾è®¡

### å›¾å±‚è§£æç¨‹åº

Javaç¨‹åºï¼Œ ä½¿ç”¨GDAL è¯»å–GDB

#### é€»è¾‘

æ ¹æ®ã€Šå›½å®¶åŸºæœ¬æ¯”ä¾‹å°ºåœ°å½¢å›¾åˆ†å¹…å’Œç¼–å·ã€‹è§„å®šå¯çŸ¥ç½‘æ ¼èŒƒå›´ï¼Œé€šè¿‡ç½‘æ ¼èŒƒå›´åŠ¨æ€ç”Ÿæˆå¯¹åº”ç½‘æ ¼çš„åˆ†å¹…ç¼–å·ï¼Œå¹¶ä»¥è¯¥ç¼–å·è¿›è¡Œæ•°æ®æ£€ç´¢ã€‚å¦‚æœå‘½ä¸­åˆ™æ ¹æ®æˆæœæ•°æ®ç»„ç»‡è§„æ ¼ä»¥åŠç›¸å…³æ ‡å‡†å¯¹æ•°æ®è¿›è¡Œè§£æï¼Œå¦‚æœæœªå‘½ä¸­åˆ™è·³è¿‡ï¼Œç›´è‡³ç½‘æ ¼æ‰«æå®Œæ¯•ã€‚

```
ç»åº¦ï¼š72~138ï¼ˆEï¼‰ï¼Œ43~53ï¼ˆ11ï¼‰

çº¬åº¦ï¼š0~56ï¼ˆNï¼‰ï¼ŒA~Nï¼ˆ14ï¼‰

å³ï¼Œç½‘æ ¼èŒƒå›´:[43,53] x [A,N]
```

æ•°æ®çš„å¤„ç†æµç¨‹å¯ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼è¿›è¡Œï¼Œåç»­ä¹Ÿæ–¹ä¾¿åŠ å…¥å…¶ä»–çš„å¤„ç†æµç¨‹ã€‚å³ï¼Œæ•´ä½“çš„æ‰§è¡Œæ¡†æ¶ä¸ºç­–ç•¥æ¨¡å¼+è´£ä»»é“¾æ¨¡å¼ã€‚ä¸ºç»Ÿä¸€ç­–ç•¥é€‰æ‹©æ¨¡å‹ï¼Œåœ¨æ­¤æå‡ºå›¾å±‚å®šä¹‰ï¼ˆLayerDefinitionï¼‰çš„æ¦‚å¿µã€‚

LayerDefinitionç”±å¦‚ä¸‹å‡ ä¸ªå…³é”®è¦ç´ ç»„æˆï¼š

- å›¾å±‚æ•°æ®æºï¼ˆLayerSourceï¼‰
    - driverï¼šé©±åŠ¨ï¼Œå‚è€ƒjava.sql.UnWrapperå®ç°
        - instance
        - name
    - catalogï¼š
    - schemaï¼š
    - tableï¼š
    - `commonDefinitionKey` ï¼šå¸¸è§„å®šä¹‰ç¼“å­˜çš„key
    - `fieldDefinitionKey` ï¼šå­—æ®µå®šä¹‰ç¼“å­˜çš„key
    - `featureCarrierKey` ï¼šè¦ç´ è½½ä½“ç¼“å­˜çš„key
- originï¼šæ•°æ®æ¥æºï¼ˆåˆ†å¹…æ–‡ä»¶è·¯å¾„ï¼‰
- scaleï¼šæ¯”ä¾‹å°ºï¼ˆå¦‚ï¼š1000000ï¼Œè¡¨ç¤º1:1000000ï¼‰
- `sourceSpatialRef`ï¼šæºåæ ‡ç³»ï¼ˆè¡¨ç°å½¢å¼å¯ä¸ºæ ‡å‡†IDã€PROJ Textã€WKT Textï¼‰
- `sinkSpatialRef`ï¼šç›®æ ‡åæ ‡ç³»ï¼ˆè¡¨ç°å½¢å¼å¯ä¸ºæ ‡å‡†IDã€PROJ Textã€WKT Textï¼‰
- `featureCode`ï¼šè¦ç´ åˆ†ç±»ç ï¼Œå¯¹åº”æˆæœæ•°æ®ç»„ç»‡ä¸­çš„è¦ç´ åˆ†ç±»ï¼ˆå¦‚ï¼šCã€Bï¼‰
- nameï¼šå›¾å±‚å‘½åï¼Œä¹Ÿæ˜¯å›¾å±‚åˆ†ç±»ç 
- layerCodeï¼šå›¾å±‚åˆ†ç±»ç 
- releaseï¼šé‡Šæ”¾æ ¼å¼ï¼ˆæ¯”å¦‚ï¼šWMTSã€Shapefileã€GDBâ€¦ï¼‰

æè¿°å­—ç¬¦ä¸ºï¼šæ¯”ä¾‹å°º:æºåæ ‡ç³»:ç›®æ ‡åæ ‡ç³»:è¦ç´ åˆ†ç±»ç :å›¾å±‚åç§°:é‡Šæ”¾æ ¼å¼ï¼Œåœ¨æè¿°å­—ç¬¦ä¸²ä¸­ï¼Œåæ ‡ç³»ä»…ä½¿ç”¨æ ‡å‡†IDè¡¨ç¤º

> ğŸ’¡ æºåæ ‡ç³»ã€è¦ç´ åˆ†ç±»ç ã€å›¾å±‚åç§°å‡æ¥è‡ªäºæºæ•°æ®ã€‚å½“ä¸”ä»…å½“åŸå§‹æ•°æ®ä¸­æ— æ³•è·å–åˆ°æºåæ ‡ç³»å®šä¹‰æ—¶ï¼Œæºåæ ‡ç³»å®šä¹‰å¯æ¥è‡ªäºé…ç½®ã€‚

#### åŸºæœ¬æµç¨‹

1. æ‰«æç½‘æ ¼å®šä¹‰ï¼ˆå¯é…ç½®ï¼‰
2. GDBè¯»å–ï¼ˆæ”¯æŒzipï¼Œå¹¶æ¨èä½¿ç”¨zipï¼‰

    ```
    /home/fuyi/GeoDatabase/China_Basic_1-100/J50.gdb
    
    /home/fuyi/GeoDatabase/China_Basic_1-100/J50.gdb.zip
    ```

3. ç­–ç•¥ç®¡ç†å™¨ï¼ˆStrategyManagerï¼‰ï¼ŒèŒè´£ï¼šæ ¹æ®é…ç½®é€‰æ‹©å…·ä½“ç­–ç•¥æ–¹æ¡ˆï¼Œå¹¶è°ƒç”¨æ‰§è¡Œ

   ç­–ç•¥ï¼ˆStrategyï¼‰ï¼ŒæŒæœ‰ç›¸åº”çš„å¤„ç†å™¨å¯¹è±¡ï¼Œè´£ä»»é“¾ç”±æ­¤å¼€å§‹å¯åŠ¨

   æ€»ä½“ä¸Šåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ

    ```
    1ã€å›¾å±‚å½’ä¸€ï¼ˆæ•°æ®ã€ä½ç½®ã€åæ ‡ç³»ï¼‰
    2ã€å›¾å±‚åˆå¹¶
    3ã€å›¾å±‚é‡Šæ”¾ï¼ˆserviceã€dumpã€nothingï¼‰
    
    Layer normalization (data, location, coordinate system)
    Layer merging
    Layer release (service, dump, nothing)
    ```

    - å½’ä¸€åŒ–å¤„ç†é˜¶æ®µï¼ˆåº”ä¿è¯ç©ºé—´å‚è€ƒå½’ä¸€ã€å›¾å±‚æ•°æ®å­˜å‚¨å½’ä¸€ï¼Œå³åº”ä¿æŒæ•´ä½“ä¸€è‡´ï¼‰
    - åˆå¹¶å¤„ç†é˜¶æ®µï¼ˆæˆ–è€…ç§°ä¹‹ä¸ºä¸­é—´å¤„ç†é˜¶æ®µï¼Œåœ¨è¿™é‡Œä¸ä»…å¯ä»¥å¤„ç†åˆå¹¶ï¼Œè¿˜å¯ä»¥åšå…¶ä»–çš„äº‹æƒ…ï¼‰
    - é‡Šæ”¾é˜¶æ®µï¼ˆæ•°æ®çš„å¤„ç†æ€»å½’æ˜¯æœ‰ç›®çš„å­˜åœ¨çš„ï¼Œé‚£ä¹ˆæœ¬é˜¶æ®µå°±æ˜¯ç¡®å®šæ•°æ®æœ€ç»ˆå­˜åœ¨æˆ–æœåŠ¡çš„å½¢å¼ï¼Œæ¯”å¦‚å¯¼å‡ºä¸ºShapefileæ–‡ä»¶ã€å†™å…¥PostGISæ•°æ®åº“æˆ–é€šè¿‡WMTSæœåŠ¡å¯¹å¤–æä¾›æ•°æ®è®¿é—®ç­‰ï¼‰

   GDALç­–ç•¥ï¼šé»˜è®¤ç­–ç•¥ï¼Œå³å…¨ç¨‹åŸºæœ¬ä¸Šä½¿ç”¨GDALå¤„ç†

4. åŒ¹é…è·å–æŒ‡å®šå›¾å±‚å¤„ç†å™¨ï¼ˆå½’ä¸€åŒ–ï¼‰ï¼ŒèŒè´£ä¸ºï¼šè§£æ

   å…ˆå†™ç¼“å­˜ï¼ˆredisï¼‰

    1. supportï¼ˆæ ¹æ®å›¾å±‚å‘½åï¼‰ï¼Œå¦‚ï¼š`boua`ï¼Œè¯¥å€¼ä½œä¸ºå¤„ç†å™¨çš„åˆ¤æ–­æ¡ä»¶
5. å¯æä¾›è½¬æ¢å¤„ç†å™¨ï¼ŒèŒè´£ä¸ºï¼šåæ ‡ç³»è½¬æ¢

   åæ ‡ç³»è½¬æ¢æ—¢å¯ä»¥åœ¨å½’ä¸€åŒ–å¤„ç†é˜¶æ®µè¿›è¡Œï¼ˆä¿è¯ä¸åŒç©ºé—´å‚è€ƒçš„æ•°æ®è½¬å…¥åŒä¸€ç©ºé—´å‚è€ƒï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸­é—´å¤„ç†é˜¶æ®µï¼ˆç»Ÿä¸€è¿›è¡Œæ•°æ®è½¬æ¢ï¼‰æˆ–æ˜¯é‡Šæ”¾é˜¶æ®µï¼ˆæ ¹æ®é‡Šæ”¾éœ€æ±‚è¿›è¡Œå¤„ç†ï¼‰

6. æä¾›æ•°æ®åˆå¹¶å¤„ç†å™¨ï¼ŒèŒè´£ä¸ºï¼šè·¨å›¾å¹…çš„å›¾å±‚åˆå¹¶

   å¤„ç†é€»è¾‘ï¼Œæ ¹æ®ç»™å®šçš„å…³è”åˆ—è¿›è¡Œç©ºé—´å¯¹è±¡åˆå¹¶ï¼ˆå¦‚ï¼šåœ¨è¡Œæ”¿å¢ƒç•Œä¸­ä½¿ç”¨è¡Œæ”¿åŒºåˆ’ç¼–ç ä»¥åŠåç§°è¿›è¡Œç©ºé—´åˆå¹¶ï¼‰

   ä¸åŒå›¾å±‚å¯ä»¥å…·æœ‰ä¸åŒçš„åˆå¹¶è§„åˆ™ï¼Œç”±ä¸åŒçš„å®ä¾‹è¿›è¡Œæä¾›å¯¹åº”çš„åˆå¹¶è¡Œä¸º

7. é‡Šæ”¾é€»è¾‘ä¹Ÿé€šè¿‡å®šä¹‰æ ¼å¼å¤„ç†å™¨å®Œæˆå¤„ç†ï¼ŒèŒè´£ï¼šæ ¼å¼å¤„ç†
    1. éœ€æŒ‡æ˜æ ¼å¼ä¸æ¯”ä¾‹å°º
    2. supportï¼Œæ ¹æ®æ ¼å¼ä¸æ¯”ä¾‹å°ºï¼Œå¦‚ï¼š`postgis:1000000`ï¼Œè¯¥å€¼ä½œä¸ºå¤„ç†å™¨çš„åˆ¤æ–­æ¡ä»¶
8. ä¸åŒæ¯”ä¾‹å°ºåˆ›å»ºä¸åŒçš„å­˜å‚¨åç§°ã€‚å¦‚ï¼Œå­˜å‚¨æ ¼å¼ä¸ºPostGISï¼š

   è¡¨å‘½åè§„åˆ™ï¼šå›¾å±‚åç§°_æ¯”ä¾‹å°ºï¼Œå°å†™

   å¦‚ï¼š`boua_1000000`ï¼Œæ„ä¸º1ï¼š1000000æ¯”ä¾‹å°ºä¸‹bouaæ•°æ®å±‚æ•°æ®


> ğŸ’¡ LayerDefineç»“æ„å¯ä½œä¸ºæ‰€æœ‰ç­–ç•¥é€‰æ‹©çš„å…¥å‚ï¼Œå†…éƒ¨åˆ™æ ¹æ®è‡ªå·±ä¾èµ–çš„æ¡ä»¶è¿›è¡Œå†³ç­–ã€‚
>
> Driver(register) â†’ GDALDriverManager â†’ DataSet â†’ Layer â†’ Feature â†’ Geometry
>
> `Redis`ç¼“å­˜ä½œä¸ºè½¬æ¢è¿‡ç¨‹ä¸­çš„æ•°æ®å­˜å‚¨ä¸äº¤æ¢å®¹å™¨
>
> å›¾å±‚å®šä¹‰æ‹†åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†è¿›è¡Œå­˜å‚¨ï¼Œå¸¸è§„å†…å®¹ä½¿ç”¨hashç»“æ„å­˜å‚¨ï¼Œä¾¿äºè¿›è¡Œå˜æ›´
> prefix key : feature code : layer code : definition
> - `scale`
> - `sourceSpatialRef`
> - `sinkSpatialRef`
> - `storage`
> 
> å±æ€§å®šä¹‰ä½¿ç”¨setç»“æ„å­˜å‚¨ï¼Œä¾¿äºåºåˆ—åŒ–ä¸ååºåˆ—åŒ– 
> 
> prefix key : feature code : layer code : definition : fields
> - `fieldDefinitions`
>
> å›¾å±‚æ•°æ®åˆ™ä½¿ç”¨listæ•°æ®ç»“æ„è¿›è¡Œå‚¨å­˜ï¼Œä¾¿äºåºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ŒåŒæ—¶ä¾¿äºæ•°æ®è¿½åŠ 
> prefix key : feature code : layer code : features
> - `features`

#### ç»“æ„æ‹†è§£å›¾

![](https://img.zhoujian.site/images/202310092222086.png)

## å®æ–½

### ç¯å¢ƒå‡†å¤‡

- æ“ä½œç³»ç»Ÿï¼šDebian 11 bookwormï¼ˆtestingï¼‰
- IDEï¼šIntelliJ IDEA 2022.1.4 (Community Edition)
- PostgreSQLï¼š14ï¼ˆ13+å³å¯ï¼‰
- JDKï¼šopenjdk version "11" 2018-09-25
- Mavenï¼šApache Maven 3.8.6
- GDALï¼šGDAL 3.5.1, released 2022/06/30

#### GDALç¯å¢ƒå‡†å¤‡

debian 11 testingï¼Œè‡ªè¡Œç¼–è¯‘gdalç¨‹åº

/debian 11 testingï¼Œå·²ç»è‡ªè¡Œå®‰è£…äº†gdalç¨‹åºï¼Œä½†æ˜¯æ²¡æœ‰java bindingæ¨¡å—ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦è‡ªè¡Œç¼–è¯‘ã€‚

> æˆ‘ä»Šå¤©ç”¨çš„æ˜¯Fedora 38 workstationï¼Œå¯ä»¥ç›´æ¥ install gdal, gdal-javaï¼Œè€Œåå°†libgdalalljni.soæ–‡ä»¶æ‹·è´åˆ°/usr/java/packages/lib ç›®å½•ä¸‹ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼Œè¯·è‡ªè¡Œåˆ›å»ºï¼‰
> 
> sudo mkdir -p /usr/java/packages/lib & sudo ln -s /usr/lib/java/gdal/libgdalalljni.so /usr/java/packages/lib/libgdalalljni.so
> 
> @time: 2023.10.08

### å¼‚å¸¸

ä¸‹å›¾æ˜¯ç»è¿‡pac,nameåˆå¹¶åçš„æ•°æ®ï¼ˆå¹¶å»é™¤äº†å¢ƒå¤–ä¸æµ·æ´‹æ•°æ®ï¼‰ï¼Œå¦‚å›¾å¯è§ï¼Œä»ç„¶å­˜åœ¨äº›è®¸è£‚ç¼

![](https://img.zhoujian.site/images/202310092229437.png)

ç»è¿‡æ’æŸ¥å‘ç°ï¼Œå‘ç°éƒ¨åˆ†åŸå§‹å›¾å‰¯ä¹‹é—´ä¾¿å­˜åœ¨è£‚ç¼ï¼Œä¸”è¯¥è£‚ç¼çš„ä¸¤è¾¹ä¸ä¸€å®šæ˜¯å¹³è¡Œçš„ã€‚é‚£ä¹ˆè¿™å°±ä¼šå¯¼è‡´åˆå¹¶å‡ºç°ä¸¤ç§æƒ…å†µ

1. å¾…åˆå¹¶çš„å¤šè¾¹å½¢ä¹‹é—´å­˜åœ¨è£‚ç¼ï¼Œä¸”å¤šè¾¹å½¢äº’ç›¸ä¸ç›¸äº¤

   ä¹Ÿå°±æ˜¯éš”æµ·ç›¸æœ›çš„é‚£ä¸€ç§ï¼Œæ­¤ç§æƒ…å†µæ˜¯å¯ä»¥é€šè¿‡åç»­æ‰‹æ®µä¿®å¤çš„ï¼Œä¸è¿‡ä¹Ÿæ˜¯åªæœ‰åœ¨è£‚ç¼çš„å®šä¹‰å­˜åœ¨äºåˆå¹¶åçš„å¤šè¾¹å½¢ä¸­ï¼ˆåªä¸è¿‡å¯èƒ½è¢«å®šä¹‰ä¸ºæ´ï¼‰çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸åœ¨çš„è¯ï¼Œä¹Ÿä¸çŸ¥é“åº”è¯¥å¦‚ä½•å‡ºæ¥

2. å¾…åˆå¹¶çš„å¤šè¾¹å½¢ä¹‹é—´å­˜åœ¨è£‚ç¼ï¼Œä¸”å¤šè¾¹å½¢å­˜åœ¨ç›¸äº¤ï¼Œå¹¶ä¸”äº¤ç‚¹åœ¨è£‚ç¼ä¹‹ä¸Š

   è¿™ç§å½¢å¼ä¾¿ä¸çŸ¥é“åº”è¯¥æ€ä¹ˆå¤„ç†äº†ã€‚

> ğŸ’¡ æ„Ÿè§‰æœ¬è´¨ä¸Šï¼Œæ˜¯ä¸€ä¸ªæ‰¾åˆ°è£‚ç¼çš„è¿‡ç¨‹ï¼Œå¹¶å°†è£‚ç¼ä½œä¸ºå†…å®¹çš„ä¸€éƒ¨åˆ†è¿›è¡Œåˆå¹¶ã€‚ä½†æ˜¯å¦‚ä½•ç¡®å®šè£‚ç¼çš„èŒƒå›´ä¹Ÿæ˜¯ä¸å®¹æ˜“çš„ï¼Œè¿™å¯èƒ½å’Œå¤šè¾¹å½¢é—´ç›¸äº’ä½ç½®å…³ç³»æœ‰å…³ç³»

## æˆæœ

### å½’ä¸€åŒ–

å³å°†åˆ†ç¦»çš„å›¾å¹…æ•°æ®æå–åˆ°ç»Ÿä¸€ä½ç½®å­˜æ”¾ï¼Œåæ ‡æœ¬æ¥å°±æ˜¯ç»Ÿä¸€çš„ï¼Œä¸éœ€è¦é¢å¤–æ“ä½œ

![](https://img.zhoujian.site/images/202310092231964.png)

### å»é™¤æ— æ•ˆåŒºåŸŸä¸æ•°æ®

- å»é™¤å¢ƒå¤–æ•°æ®ï¼ˆpac < 100000ï¼‰
- å»é™¤æµ·åŸŸé¢æ•°æ®ï¼ˆpac = 250100ï¼‰
- å»é™¤ç©ºé—´æ— æ•ˆæ•°æ®ï¼ˆ`ST_IsValid(geometry)==false`ï¼‰

![](https://img.zhoujian.site/images/202310092232208.png)

### åˆå¹¶å¤„ç†

å³è¿›è¡Œå›¾å¹…åˆå¹¶ï¼ˆä½¿ç”¨pacä¸nameï¼‰

![](https://img.zhoujian.site/images/202310092237845.png)

![](https://img.zhoujian.site/images/202310092314308.png)

> ğŸ’¡ ä»æ­¤å¤„å¯ä»¥å‘ç°ï¼Œéƒ¨åˆ†åŒºåŸŸå­˜åœ¨è£‚ç¼ã€‚ \
> 1ã€pac=632722\
> 2ã€pac=140404\
> 3ã€pac=140427\
> 4ã€pac=520625\
> 5ã€pac=520628\
> \
> æˆ‘åŒæ—¶å¯¹æ¯”äº†QGISã€ArcGISä¸­æä¾›çš„Dissolveå·¥å…·çš„èåˆæ•ˆæœï¼ˆä½¿ç”¨pacä¸nameï¼‰ï¼Œå°±éƒ½å­˜åœ¨è£‚ç¼æƒ…å†µä¸Šï¼š
> åˆå¹¶åçš„æ•°é‡éƒ½æ˜¯ï¼š2900
> arcgis ä¼˜äº wukong ä¼˜äº qgis


#### ArcGIS
![](https://img.zhoujian.site/images/202310092242009.png)

#### QGIS
![](https://img.zhoujian.site/images/202310092242600.png)

#### wukong
![](https://img.zhoujian.site/images/202310092243119.png)

### Source Code

[wukong-github](https://github.com/zhou-fuyi/wukong)

### å°ç»“

å› åšå¢ƒç•Œåˆå¹¶ï¼Œå¼€å‘äº†WuKongç¨‹åºï¼Œä½†æ˜¯å…¶å«ä¹‰å¹¶ä¸ä»…ä»…åªæ˜¯è¿›è¡Œå¢ƒç•Œåˆå¹¶ï¼Œä»–æ˜¯ä¸€ä¸ªåŸºäºå›½å®¶å¼€æ”¾çš„åŸºç¡€åœ°ç†ä¿¡æ¯æ•°æ®çš„ï¼ˆç›®å‰æ˜¯åŸºäº1ï¼š100ç©åŸºç¡€åœ°ç†ä¿¡æ¯æ•°æ®ï¼‰ï¼Œå¯ä»¥è¿›è¡Œå½’ä¸€ã€è½¬æ¢ã€é‡Šæ”¾çš„é€šç”¨ç¨‹åºã€‚

è™½ç„¶ç›®å‰ä»…å®Œæˆäº†åŸºç¡€å¢ƒç•Œçš„åˆå¹¶ï¼ˆä¸”å­˜åœ¨ç‘•ç–µï¼Œä½†å¥½æ­¹ä¹Ÿå’ŒQGISçš„å®ç°å·®ä¸å¤šä¸æ˜¯ï¼‰ï¼Œä½†è¿™ä»…ä»…åªæ˜¯å¼€å§‹ï¼Œè¿˜æœ‰æ›´å¤šçš„å†…å®¹å¯ä»¥å®ç°ã€‚

## å‚è€ƒ

### [å…¨å›½åœ°ç†ä¿¡æ¯èµ„æºç›®å½•æœåŠ¡ç³»ç»Ÿï¼ˆhttps://www.webmap.cn/ï¼‰](https://www.webmap.cn/)

[](https://www.webmap.cn/commres.do?method=result100W)

æ•°æ®æ¥æºäºå…¨å›½åœ°ç†ä¿¡æ¯èµ„æºç›®å½•æœåŠ¡ç³»ç»Ÿï¼šwww.webmap.cn

### [GB/T 13989-2012 å›½å®¶åŸºæœ¬æ¯”ä¾‹å°ºåœ°å½¢å›¾åˆ†å¹…å’Œç¼–å·](http://c.gb688.cn/bzgk/gb/showGb?type=online&hcno=30799A9AF9BFA98E77D21ABC5F0984E2)

#### 1ï¼š1000000åœ°å½¢å›¾çš„åˆ†å¹…

ç»åº¦ï¼š72~138ï¼ˆEï¼‰ï¼Œ43~53ï¼ˆ11ï¼‰

çº¬åº¦ï¼š0~56ï¼ˆNï¼‰ï¼ŒA~Nï¼ˆ14ï¼‰

![](https://img.zhoujian.site/images/202310092249727.png)

![](https://img.zhoujian.site/images/202310092249838.png)

### **[GB/T 33183-2016 åŸºç¡€åœ°ç†ä¿¡æ¯ 1:50 000åœ°å½¢è¦ç´ æ•°æ®è§„èŒƒ](https://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=95CAA9D86228B35440B422107DDF4FAC)**

#### 1:50000åœ°å½¢è¦ç´ å±æ€§è¡¨ç»“æ„

- å¢ƒç•Œä¸æ”¿åŒº

![](https://img.zhoujian.site/images/202310092250624.png)

- åœ°å

![](https://img.zhoujian.site/images/202310092251089.png)

#### 1:50000åœ°å½¢è¦ç´ æ•°æ®è¦ç´ å†…å®¹ä¸é€‰å–æŒ‡æ ‡

![](https://img.zhoujian.site/images/202310092252694.png)

### èµ°å¤©æ¶¯å¾å°æ´‹å…¬ä¼—å·

[2021ç‰ˆå›½å®¶åŸºç¡€åœ°ç†æ•°æ®åº“æ‰¹é‡ä¸‹è½½ä¸æ‹¼æ¥æ–¹æ³•](https://mp.weixin.qq.com/s?__biz=MzI4OTU3NTY1OA==&mid=2247498194&idx=1&sn=19498810d66555fd1ef703ea7c693385&scene=21#wechat_redirect)

[ã€èµ„æºåˆ†äº«ã€‘å¦‚ä½•æŸ¥æ‰¾é è°±çš„å›½æ ‡ï¼Œå…¨æ–‡å…è´¹çœ‹ï¼å…¨æ–‡å…è´¹çœ‹ï¼å…¨æ–‡å…è´¹çœ‹ï¼](https://mp.weixin.qq.com/s?__biz=MzI4OTU3NTY1OA==&mid=2247487190&idx=1&sn=e2653937da9c1784799e5824251a4e29&scene=21#wechat_redirect)

[1ï¼š100ä¸‡åŸºç¡€åœ°ç†æ•°æ®åº“æ€ä¹ˆçœ‹ï¼Ÿæ€ä¹ˆç”¨ï¼Ÿèƒ½å¹²å˜›ï¼Ÿ](https://mp.weixin.qq.com/s?__biz=MzI4OTU3NTY1OA==&mid=2247497104&idx=1&sn=5e0faeb957f24ff0065cab5bfe48432c&scene=21#wechat_redirect)

### GDAL

#### vector-openfilegdb

[Vector Data Model - GDAL documentation](https://gdal.org/user/vector_data_model.html)

[ESRI File Geodatabase (OpenFileGDB) - GDAL documentation](https://gdal.org/drivers/vector/openfilegdb.html#vector-openfilegdb)

[Java bindings - GDAL documentation](https://gdal.org/api/java/index.html)

[Overview (GDAL/OGR 3.5.0 Java bindings API)](https://gdal.org/java/)

### Other

https://github.com/modood/Administrative-divisions-of-China

[ST_Centroid](https://postgis.net/docs/ST_Centroid.html)

### Conda

[Conda - Conda documentation](https://docs.conda.io/en/latest/)

[æ»‘åŠ¨éªŒè¯é¡µé¢](https://www.jianshu.com/p/edaa744ea47d?u_atoken=121f43f1-fdcd-4e6e-89b8-78ed0b5d53c0&u_asession=01vJCfZWOT-w4M8anEMxIiBiOhLNeu-JkFZ_1KGed-3sZ5KvtDozh1Mrb1DIwpJLk3X0KNBwm7Lovlpxjd_P_q4JsKWYrT3W_NKPr8w6oU7K-qwZKCFd8tSMwtYlTqNfz-slvTX-jMTLEIhdGFg3rxgWBkFo3NEHBv0PZUm6pbxQU&u_asig=05xVYRAyyG4jUvWvkBikdy2PaJsGgB3Psrk2Cn09aqTIw2KSnTmkyd_zkKJkygeb8FKy9FKfeWou2VcIksVk-ZbSDOG2ssli4mJ4UUI7IMCGfwGiBtAg6M8Yf_oXm2MClLCe0sIXSHWKUsBpsSyIE9dNxOp5PcZ_N657S9lhbnyrz9JS7q8ZD7Xtz2Ly-b0kmuyAKRFSVJkkdwVUnyHAIJzW7IC2avqF1LIrtlLweo07DIG-tDp0CEEzAQrdkGCrnV6FPw117USKdEPc8n7HkzU-3h9VXwMyh6PgyDIVSG1W_cRkRc5S0cET8575x2ZLM6H-LLY_Nj0_-S2jVka7GV0u0cWTVXVHmnS21MwbSLtAX3hGch3yOJtwizh8Cez--mmWspDxyAEEo4kbsryBKb9Q&u_aref=cjZDZ%2B0OYiEMl2o1Z5eKyXsruzQ%3D)